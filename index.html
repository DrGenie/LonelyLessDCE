<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>LonelyLessAustralia Decision Aid Tool</title>
  <link rel="stylesheet" href="styles.css"/>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
<div class="container">
  <header>
    <h1>LonelyLessAustralia Decision Aid Tool</h1>
  </header>

  <div class="tabs">
    <button class="tablink active" onclick="openTab('introTab', this)">Introduction</button>
    <button class="tablink" onclick="openTab('instructionsTab', this)">Instructions</button>
    <button class="tablink" onclick="openTab('attributesTab', this)">Attributes</button>
    <button class="tablink" onclick="openTab('inputsTab', this)">Inputs</button>
    <button class="tablink" onclick="openTab('wtpTab', this)">WTP Results</button>
    <button class="tablink" onclick="openTab('probTab', this)">Program Uptake Probability</button>
    <button class="tablink" onclick="openTab('costsTab', this)">Costs & Benefits</button>
    <button class="tablink" onclick="openTab('scenariosTab', this)">Scenarios</button>
  </div>

  <!-- Introduction Tab -->
  <div id="introTab" class="tabcontent" style="display: block;">
    <div class="intro-box">
      <p>
        Loneliness affects over five million Australians, especially older adults, 
        resulting in significant health and economic challenges. This tool uses 
        discrete choice experiment (DCE) estimates to predict programme uptake 
        probabilities, enabling personalised services based on the attributes older 
        adults consider most crucial.
      </p>
      <p>Use the tabs above to navigate:</p>
      <ul>
        <li><strong>Instructions</strong> – Guidance for each tool feature.</li>
        <li><strong>Attributes</strong> – Detailed descriptions of the DCE attributes.</li>
        <li><strong>Inputs</strong> – Configure your scenario’s cost, accessibility, frequency, etc.</li>
        <li><strong>WTP Results</strong> – View a bar chart of main model willingness to pay (A$) with standard errors.</li>
        <li><strong>Program Uptake Probability</strong> – Dynamically computed chart based on your scenario inputs.</li>
        <li><strong>Costs &amp; Benefits</strong> – Reflects new literature-based cost estimates and QALY gains.</li>
        <li><strong>Scenarios</strong> – Save multiple scenarios, compare them, or export PDF-based results.</li>
      </ul>
    </div>
  </div>

  <!-- Instructions Tab -->
  <div id="instructionsTab" class="tabcontent">
    <h2>How to Use This Tool</h2>
    <p>
      1. Check <strong>Attributes</strong> to understand cost, accessibility, frequency, method, duration, and support types.
    </p>
    <p>
      2. Under <strong>Inputs</strong>, select your state (if any), whether to adjust for cost-of-living, cost per session, 
      local vs. wider community, weekly vs. monthly, virtual vs. hybrid, session duration, and support type.
    </p>
    <p>
      3. Click “Calculate &amp; View Results” to open a new window with cost-benefit charts, QALY gains, and an optional PDF export. 
    </p>
    <p>
      4. The <strong>WTP Results</strong> tab displays a bar chart summarising the main model’s willingness to pay (A$) for each attribute.
    </p>
    <p>
      5. The <strong>Program Uptake Probability</strong> tab offers a bar chart for the predicted programme uptake under your current scenario.
    </p>
    <p>
      6. The <strong>Costs &amp; Benefits</strong> tab consolidates realistic cost data (advertisement, training, delivery, 
      participant time/travel, total cost) and QALY-based benefits (0.02, 0.05, or 0.1 QALYs).
    </p>
    <p>
      7. Under <strong>Scenarios</strong>, you can save or compare multiple configurations side by side.
    </p>
  </div>

  <!-- Attributes Tab -->
  <div id="attributesTab" class="tabcontent">
    <h2>Programme Attributes</h2>
    <p><strong>Cost per session:</strong> The out-of-pocket fee (AUD) that participants must pay every time they attend.</p>
    <p><strong>Accessibility:</strong> Whether the programme is local (up to 12 km) or in a wider community (50+ km), 
      factoring in mobility, transport cost, and convenience.</p>
    <p><strong>Frequency of Interaction:</strong> Daily (reference), weekly, or monthly, influencing how often participants engage socially.</p>
    <p><strong>Method of Interaction:</strong> In-person, virtual, or hybrid, reflecting user preferences, technology access, and mobility considerations.</p>
    <p><strong>Duration of Each Interaction:</strong> 30 min (reference), 2-hour, or 4-hour sessions, affecting the depth of interactions and scheduling needs.</p>
    <p><strong>Type of Support Programme:</strong> Peer support (reference), community engagement, psychological counselling, or VR-based sessions.</p>
  </div>

  <!-- Inputs Tab -->
  <div id="inputsTab" class="tabcontent">
    <h2>Programme Inputs</h2>
    <p>
      Configure your scenario. Then click “Calculate &amp; View Results” for a new cost-benefit window, 
      or “Show Probability Plot” under the “Program Uptake Probability” tab to see a dynamic bar chart.
    </p>
    <form onsubmit="event.preventDefault();">
      <div class="form-grid">
        <div class="form-item">
          <label for="state_select">State:</label>
          <select id="state_select">
            <option value="">None</option>
            <option value="NSW">New South Wales (NSW)</option>
            <option value="VIC">Victoria (VIC)</option>
            <option value="QLD">Queensland (QLD)</option>
            <option value="WA">Western Australia (WA)</option>
            <option value="SA">South Australia (SA)</option>
            <option value="TAS">Tasmania (TAS)</option>
            <option value="ACT">Australian Capital Territory (ACT)</option>
            <option value="NT">Northern Territory (NT)</option>
          </select>
          <br/>
          <label for="adjustCosts">Adjust for Cost of Living?</label>
          <select id="adjustCosts">
            <option value="no">No</option>
            <option value="yes">Yes</option>
          </select>
        </div>

        <div class="form-item">
          <label>
            Cost per Session (AUD): <span id="costLabel">50</span>
          </label>
          <input 
            type="range" 
            id="costSlider" 
            min="0" 
            max="100" 
            step="1" 
            value="50" 
            oninput="updateCostDisplay(this.value)" 
          />
        </div>

        <div class="form-item">
          <label><input type="checkbox" id="localCheck" />Local Area (12 km)</label>
          <br/>
          <label><input type="checkbox" id="widerCheck" />Wider Community (50+ km)</label>
        </div>

        <div class="form-item">
          <label><input type="checkbox" id="weeklyCheck" />Weekly</label>
          <br/>
          <label><input type="checkbox" id="monthlyCheck" />Monthly</label>
        </div>

        <div class="form-item">
          <label><input type="checkbox" id="virtualCheck" />Virtual Only</label>
          <br/>
          <label><input type="checkbox" id="hybridCheck" />Hybrid (In-person &amp; Virtual)</label>
        </div>

        <div class="form-item">
          <label><input type="checkbox" id="twoHCheck" />2-Hour Session</label>
          <br/>
          <label><input type="checkbox" id="fourHCheck" />4-Hour Session</label>
        </div>

        <div class="form-item">
          <label><input type="checkbox" id="commCheck" />Community Engagement</label>
          <br/>
          <label><input type="checkbox" id="psychCheck" />Psychological Counselling</label>
          <br/>
          <label><input type="checkbox" id="vrCheck" />Virtual Reality</label>
        </div>
      </div>
      <div class="buttons-row">
        <button type="button" onclick="openSingleScenario()">Calculate &amp; View Results</button>
      </div>
    </form>
  </div>

  <!-- WTP Results Tab -->
  <div id="wtpTab" class="tabcontent">
    <h2>Willingness to Pay (WTP) Results</h2>
    <p>
      The willingness-to-pay (WTP) for each program feature is calculated by taking the ratio 
      of the feature’s coefficient to the negative of the cost coefficient. This metric 
      quantifies the monetary value respondents place on each program feature, holding other 
      factors constant.
    </p>
    <p>
      For example, among the programme types, community engagement is the most highly valued, 
      with a WTP of A$14.47 (SE=3.31, p &lt; 0.001). This shows older adults are willing to pay 
      an additional A$14.47 for community-based programmes, compared to the reference peer 
      support scenario.
    </p>
    <div class="buttons-row">
      <button onclick="renderWTPChart()">Show WTP Plot</button>
    </div>
    <div class="chart-grid">
      <div class="chart-box">
        <h3>WTP (A$)</h3>
        <canvas id="wtpChartMain"></canvas>
      </div>
    </div>
  </div>

  <!-- Probability Plot Tab -->
  <div id="probTab" class="tabcontent">
    <h2>Program Uptake Probability</h2>
    <p>
      Click “Show Probability Plot” to compute a new bar chart based on your <strong>Inputs</strong>. 
      Depending on whether the predicted uptake is below 30%, between 30–70%, or above 70%, 
      you will receive suggestions on possible adjustments (e.g., lowering cost or adding 
      community engagement features) that could increase uptake.
    </p>
    <div class="buttons-row">
      <button onclick="renderProbChart()">Show Probability Plot</button>
    </div>
    <div class="chart-grid">
      <div class="chart-box">
        <h3>Program Uptake Probability</h3>
        <canvas id="probChartMain"></canvas>
      </div>
    </div>
  </div>

  <!-- Costs & Benefits Tab -->
  <div id="costsTab" class="tabcontent">
    <h2>Costs &amp; Benefits</h2>
    <p>
      <strong>Literature-Based Estimates of QALY Gains</strong>:
      <ul>
        <li>Masi et al. (2011): Social interventions can reduce loneliness and improve mental health, implying QALY gains.</li>
        <li>Eaton et al. (2010): 0.05 QALYs per participant over five years.</li>
        <li>PRISM Trial (Shankar et al., 2017): 0.03–0.07 QALYs per participant over three years.</li>
        <li>OECD (2011): 0.02–0.1 QALYs per participant, depending on intervention.</li>
      </ul>
      We implement three scenarios for QALY gains per participant:
      <strong>Low = 0.02 QALYs</strong>, <strong>Moderate = 0.05 QALYs</strong>, and <strong>High = 0.1 QALYs</strong>.
    </p>
    <p>
      <strong>Monetization of QALY Gains</strong>:
      Each QALY is valued at A$50,000. 
      Multiply the total QALY gains by this value to determine monetised benefits. 
    </p>
    <p>
      <strong>Realistic Cost Data</strong>:
      <ul>
        <li><strong>Advertisement &amp; Recruitment:</strong> A$8,127.60 total (newspaper ads, leaflets, postage, admin personnel).</li>
        <li><strong>Training Facilitators:</strong> A$10,000.00 (covering five-hour sessions for 100 facilitators).</li>
        <li><strong>Delivery Costs:</strong> A$32,000.00 (facilitator salaries, materials, venue hire).</li>
        <li><strong>Participant Time &amp; Travel:</strong> A$7,500.00 (time cost plus local travel expenses).</li>
        <li><strong>Total Intervention Cost (Base):</strong> A$55,627.60, at ~A$20.00 per person for 2-hour sessions across 100 groups.</li>
      </ul>
      This base cost is scaled dynamically by the predicted programme uptake (8% to 90%). 
      For instance, if predicted uptake is 50%, total costs are proportionally A$27,813.80 
      (assuming fewer participants leads to reduced material &amp; delivery costs).
    </p>
    <p>
      <strong>Integration with Program Uptake Probability</strong>:
      If you select more attractive features (e.g., community engagement, which has a WTP of A$14.47), 
      uptake probabilities are likely higher, increasing total costs but also enhancing QALY gains.
      Conversely, VR (WTP -A$9.58) may yield lower uptake, reducing total costs but also lowering QALY 
      improvements overall.
    </p>
  </div>

  <!-- Scenarios Tab -->
  <div id="scenariosTab" class="tabcontent">
    <h2>Saved Scenarios</h2>
    <p>
      Save your scenario from <strong>Inputs</strong> and compare or export multiple configurations, 
      including cost-benefit charts, to PDF.
    </p>
    <div class="buttons-row">
      <button onclick="saveScenario()">Save Current Scenario</button>
      <button onclick="openComparison()">Compare All Scenarios</button>
    </div>
    <table id="scenarioTable">
      <thead>
        <tr>
          <th>Name</th>
          <th>State</th>
          <th>Cost Adjust?</th>
          <th>Cost (AUD)</th>
          <th>Local?</th>
          <th>Wider?</th>
          <th>Weekly?</th>
          <th>Monthly?</th>
          <th>Virtual?</th>
          <th>Hybrid?</th>
          <th>2H?</th>
          <th>4H?</th>
          <th>Comm?</th>
          <th>Psych?</th>
          <th>VR?</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <footer>
    <p>
      &copy; 2025 LonelyLessAustralia. All Rights Reserved. <br/>
      Author: Mesfin Genie, Newcastle Business School, The University of Newcastle, Australia
    </p>
  </footer>
</div>
<script src="script.js"></script>
</body>
</html>
